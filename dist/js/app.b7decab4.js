(function(){"use strict";var e={9201:function(e,t,n){var a=n(8108),i=n(4239);t["Z"]={async create(){return a.Z.post("/collection").then((()=>this.readInfo()))},async addMovie(e,t){return a.Z.post(`/collection/${e}/movie/${t}`).then((()=>this.readInfo()))},async deleteMovie(e){const t=await a.Z.get("/collection/all");t.map((t=>{a.Z["delete"](`/collection/${t.id}/movie/${e}`).then((()=>this.readInfo()))}))},async existMovie(e){return await a.Z.get(`/collection/exist?movie_id=${e}`)},async getFriendMovies(e){const{default_collection:t}=await a.Z.get(`/user/${e}`);return await a.Z.get(`/collection/${t}/movie/all`)},async getAllCollections(){return await a.Z.get("/collection/all")},async readInfo(){i.Z.commit("setCollection",await(await a.Z.get("/collection/all")).reduce((async(e,t)=>(await e).concat({name:t.name,id:t.id,movies:await(await a.Z.get(`/collection/${t.id}/movie/all`)).reduce((async(e,t)=>(await e).concat({id:t.movie_id})),[])})),[]))},async update(e,t){return a.Z.post(`/collection/${e}`,{name:t}).then((()=>this.readInfo()))},async delete(e){return a.Z["delete"](`/collection/${e}`).then((()=>this.readInfo()))}}},1844:function(e,t,n){var a=n(8108);t["Z"]={sendCode(e){return a.Z.post("/email",{address:e})},async verifyCode(e,t){return a.Z.get(`/email?address=${e}&code=${t}`).then((e=>e.verifySuccess))},upload(e){let t=new FormData;return t.append("file",e),a.Z.post("/upload/avatar",t)}}},3020:function(e,t,n){var a=n(8108);t["Z"]={that:void 0,search(e){return a.Z.get(`https://api.themoviedb.org/3/search/movie?api_key=3f5ff60226b0f8730f299dfd0c20bae7&query=${e}&language=zh-CN&page=1&include_adult=false`).then((e=>e.results.map((e=>({title:e.title,id:e.id})))))},async detail(e){return a.Z.get(`https://api.themoviedb.org/3/movie/${e}?api_key=3f5ff60226b0f8730f299dfd0c20bae7&language=zh-CN`).then((e=>({title:e.title,src:`https://image.tmdb.org/t/p/original${e.poster_path}`,rating:e.vote_average/2,imdbId:e.imdb_id,description:e.overview,tag:e.tagline})))},async trailerUrl(e){return a.Z.get(`https://www.googleapis.com/youtube/v3/search?part=snippet&key=AIzaSyDNZjCIoK5wTgRumy6lUJn3PSpaBvD8Vf4&q=${e}&type=video&maxResults=1`).then((e=>({videoID:e.items[0].id.videoId,videoUrl:`https://www.youtube.com/embed/${e.items[0].id.videoId}`})))},async nowPlaying(){return a.Z.get("https://api.themoviedb.org/3/movie/now_playing?api_key=3f5ff60226b0f8730f299dfd0c20bae7&language=zh-CN&page=1&include_adult=false").then((e=>e.results.map((e=>e.id)).slice(0,6)))},async popular(){return a.Z.get("https://api.themoviedb.org/3/movie/popular?api_key=3f5ff60226b0f8730f299dfd0c20bae7&language=zh-CN&page=1&include_adult=false").then((e=>e.results.map((e=>e.id)).slice(0,6)))},async topRated(){return a.Z.get("https://api.themoviedb.org/3/movie/top_rated?api_key=3f5ff60226b0f8730f299dfd0c20bae7&language=zh-CN&page=1&include_adult=false").then((e=>e.results.map((e=>e.id)).slice(0,6)))},async upcoming(){return a.Z.get("https://api.themoviedb.org/3/movie/upcoming?api_key=3f5ff60226b0f8730f299dfd0c20bae7&language=zh-CN&page=1&include_adult=false").then((e=>e.results.map((e=>e.id)).slice(0,6)))},async filter(e,t,n,i){return a.Z.get(`https://api.themoviedb.org/3/discover/movie?api_key=3f5ff60226b0f8730f299dfd0c20bae7&language=zh-CN&sort_by=${i}.desc&include_adult=false&page=${e}&primary_release_year=${t}&with_genres=${n}`).then((e=>e.results.map((e=>e.id))))},async genres(){return a.Z.get("https://api.themoviedb.org/3/genre/movie/list?api_key=3f5ff60226b0f8730f299dfd0c20bae7&language=zh-CN").then((e=>e.genres.map((e=>({id:e.id,name:e.name})))))},async likes(e){return(await a.Z.get(`/movie/${e}`,{id:e})).like_count},attitude:{like(e){return a.Z.post(`/movie/${e}/attitude`,{id:e})},async read(e){return(await a.Z.get(`/movie/${e}/attitude`,{id:e})).attitude},dislike(e){return a.Z["delete"](`/movie/${e}/attitude`,{id:e})}},comment:{async create(e,t){await a.Z.post(`/comment/movie/${e}`,{content:t})},async readAll(e){return await(await a.Z.get(`/comment/movie/${e}`)).reduce((async(e,t)=>{const n=await a.Z.get(`/user/${t.user_id}`);return(await e).concat({name:n.name,content:t.content,date:t.created_time,avatar_url:n.avatar_url,id:t.id})}),[])},async update(e,t){await a.Z.post(`/comment/${e}`,{content:t})},async delete(e){await a.Z["delete"](`/comment/${e}`)}},history:{onVisited(e){return a.Z.post(`/history/watch/movie/${e}`)},readVisited(){return a.Z.get("/history/watch/movie")},async onSearched(e){await a.Z.post(`/history/search/movie/${e}`)},async clear(){await a.Z["delete"]("/history/search/all")},async readSearched(){const e=await a.Z.get("/history/search/movie");return Promise.all(e.map((async e=>({id:parseInt(e.movie_id),name:(await this.detail(e.movie_id)).title}))))},async detail(e){return a.Z.get(`https://api.themoviedb.org/3/movie/${e}?api_key=3f5ff60226b0f8730f299dfd0c20bae7&language=zh-CN`).then((e=>({title:e.title,src:`https://image.tmdb.org/t/p/original${e.poster_path}`,rating:e.vote_average/2,imdbId:e.imdb_id,description:e.overview,tag:e.tagline})))}}}},2900:function(e,t,n){var a=n(8108),i=n(4239),r=n(1120);t["Z"]={async login({username:e,password:t}){i.Z.commit("login",await a.Z.post("/session/token",{username:e,password:t})),this.readInfo()},register({username:e,password:t,nickname:n,email:i}){return a.Z.post("/user",{username:e,password:t,nickname:n,email:i})},async logout(){await a.Z.post("/user/logout"),i.Z.commit("logout"),r.N.push("/login")},async readActive(e){return a.Z.get(`/user/${e}/online`).then((e=>i.Z.commit("readActive",e)))},postActive(){return a.Z.post("/user/online")},async uploadAvatar(e){let t=new FormData;return t.append("name","file"),t.append("file",e),a.Z.post("/upload/avatar",t,{headers:{"Content-Type":"multipart/form-data"}}).then((()=>this.readInfo()))},async readInfo(){return i.Z.commit("setUser",await a.Z.get("/user"))},friend:{addFriend(e){return a.Z.post("/friend/apply",{name:e})},async deleteFriend(e){return a.Z["delete"](`/friend/${e}`).then((()=>this.readInfo()))},async acceptApply(e){return a.Z.post(`/friend/${e}/accept`).then((()=>this.readInfo()))},async rejectApply(e){return a.Z.post(`/friend/${e}/reject`).then((()=>this.readInfo()))},async pinTop(e){return a.Z.post(`/friend/${e}/pin`).then((()=>this.readInfo()))},async readInfo(){i.Z.commit("setFriend",{apply:await(await a.Z.get("/friend/apply/all")).reduce((async(e,t)=>(await e).concat(await a.Z.get(`/user/${t.friend_id}`))),[]),list:await(await a.Z.get("/friend/all")).reduce((async(e,t)=>(await e).concat(Object.assign(await a.Z.get(`/user/${t.friend_id}`),{is_top:t.is_top,is_active:await a.Z.get(`/user/${t.friend_id}/online`)}))),[])})}}}},8153:function(e,t,n){var a=n(9242),i=n(3396),r=n(7771),o=n(7718),l=n(6562),s=n(5101),d=n(3289),c=n(1285),u=n(9271),m=n(9671),f=n(7471),p=n(5030),g=n(8952);const h=(0,i.Uk)("mdi-arrow-left"),w=(0,i.Uk)("随意影视"),v=(0,i.Uk)("mdi-magnify"),y=(0,i.Uk)(" 登录过期，请重新登录 "),_=(0,i.Uk)("功能还在建设中");function b(e,t,n,b,k,Z){const W=(0,i.up)("UserAvatar"),j=(0,i.up)("DrawerNavigation"),$=(0,i.up)("router-view"),x=(0,i.up)("ButtomNavigation");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i.Wm)(o.q,null,{default:(0,i.w5)((()=>[(0,i.Wm)(f.iv,{image:"/appbar.png",app:""},{image:(0,i.w5)((()=>[(0,i.Wm)(c.f,{gradient:"to top right, rgba(19,84,122,.8), rgba(128,208,199,.8)"})])),default:(0,i.w5)((()=>[Z.isTopLevelPage?(0,i.wy)(((0,i.wg)(),(0,i.j4)(s.T,{key:0,icon:"",onClick:t[0]||(t[0]=(0,a.iM)((e=>this.$refs.drawer.changeDrawer()),["stop"]))},{default:(0,i.w5)((()=>[(0,i.Wm)(l.G,{bordered:"",bottom:"",color:Z.user.isActive?"green accent-4":"grey",dot:"","offset-x":"5","offset-y":"28"},{default:(0,i.w5)((()=>[(0,i.Wm)(W,{name:Z.user.info.nickname,path:Z.user.info.avatar_url},null,8,["name","path"])])),_:1},8,["color"])])),_:1},512)),[[a.F8,Z.user.isLogin]]):(0,i.wy)(((0,i.wg)(),(0,i.j4)(s.T,{key:1,icon:"",onClick:Z.goBack},{default:(0,i.w5)((()=>[(0,i.Wm)(d.t,null,{default:(0,i.w5)((()=>[h])),_:1})])),_:1},8,["onClick"])),[[a.F8,Z.user.isLogin]]),(0,i.Wm)(p.q,{class:"ml-5"},{default:(0,i.w5)((()=>[w])),_:1}),(0,i.wy)((0,i.Wm)(s.T,{icon:"",to:"/search"},{default:(0,i.w5)((()=>[(0,i.Wm)(d.t,null,{default:(0,i.w5)((()=>[v])),_:1})])),_:1},512),[[a.F8,Z.user.isLogin]])])),_:1}),Z.user.isLogin?((0,i.wg)(),(0,i.j4)(j,{key:0,ref:"drawer"},null,512)):(0,i.kq)("",!0),(0,i.Wm)(u.O,null,{default:(0,i.w5)((()=>[(0,i.Wm)($,null,{default:(0,i.w5)((({Component:e})=>[(0,i.Wm)(g.Qn,null,{default:(0,i.w5)((()=>[((0,i.wg)(),(0,i.j4)((0,i.LL)(e)))])),_:2},1024)])),_:1})])),_:1}),(0,i.wy)((0,i.Wm)(x,{pages:k.topLevelPages},null,8,["pages"]),[[a.F8,Z.user.isLogin]]),(0,i.Wm)(m.v,{modelValue:this.user.expired,"onUpdate:modelValue":t[1]||(t[1]=e=>this.user.expired=e),color:"warning"},{default:(0,i.w5)((()=>[y])),_:1},8,["modelValue"])])),_:1}),(0,i.wy)((0,i.Wm)(r.w,{type:"warning"},{default:(0,i.w5)((()=>[_])),_:1},512),[[a.F8,this.$store.state.unfinished]])],64)}n(6699);var k=n(7139),Z=n(6728);function W(e,t,n,a,r,o){return(0,i.wg)(),(0,i.j4)(Z.N,{value:r.activeBtn,color:"primary",app:"",fluid:""},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.pages,((e,t)=>((0,i.wg)(),(0,i.j4)(s.T,{key:t,to:e.path,class:"mr-6"},{default:(0,i.w5)((()=>[(0,i._)("span",null,(0,k.zw)(e.name),1),(0,i.Wm)(d.t,{icon:e.icon},null,8,["icon"])])),_:2},1032,["to"])))),128))])),_:1},8,["value"])}var j={data(){return{activeBtn:1}},props:{pages:{type:Array}}},$=n(89);const x=(0,$.Z)(j,[["render",W]]);var C=x,A=n(7229),U=n(3601),D=n(4075),F=n(6824),O=n(8521),L=n(3369),I=n(6052),V=n(1358),N=n(7288),S=n(2127),T=n(4193),z=n(7033);const P=(0,i._)("div",{style:{width:"75px"}},"我的好友",-1),M=(0,i.Uk)("空空如也"),E={class:"pa-2 d-flex justify-center"},K=(0,i.Uk)(" 退出账号 ");function q(e,t,n,r,o,c){const u=(0,i.up)("UserAvatar"),m=(0,i.up)("MovieList");return(0,i.wg)(),(0,i.j4)(z.V,{modelValue:o.drawer,"onUpdate:modelValue":t[2]||(t[2]=e=>o.drawer=e),app:"",temporary:""},{activator:(0,i.w5)((({props:e})=>[(0,i.Wm)(s.T,(0,i.dG)({color:"primary"},e,{size:"x-small",icon:"mdi-dots-vertical "}),null,16)])),append:(0,i.w5)((()=>[(0,i._)("div",E,[(0,i.Wm)(s.T,{color:"primary",onClick:t[1]||(t[1]=e=>c.logout())},{default:(0,i.w5)((()=>[(0,i.Wm)(d.t,{left:"",icon:"mdi-logout-variant"}),K])),_:1})])])),default:(0,i.w5)((()=>[(0,i.Wm)(I.i,null,{default:(0,i.w5)((()=>[(0,i.Wm)(V.l,null,{default:(0,i.w5)((()=>[(0,i.Wm)(N.U,{start:"",left:"",prepend:""},{default:(0,i.w5)((()=>[(0,i.Wm)(l.G,{bordered:"",bottom:"",color:c.user.isActive?"green accent-4":"grey",dot:"","offset-x":"5","offset-y":"28"},{default:(0,i.w5)((()=>[(0,i.Wm)(u,{name:c.user.info.nickname,path:c.user.info.avatar_url},null,8,["name","path"])])),_:1},8,["color"])])),_:1}),(0,i.Wm)(V.l,{title:c.user.info.nickname,subtitle:c.user.info.email,class:"px-0"},null,8,["title","subtitle"])])),_:1})])),_:1}),(0,i.Wm)(D.J),(0,i.Wm)(F.o,{class:"d-flex justify-end align-center mt-2"},{default:(0,i.w5)((()=>[(0,i.Wm)(O.D,{class:"pl-10",style:{"font-size":"13px"}},{default:(0,i.w5)((()=>[P])),_:1}),(0,i.Wm)(O.D,{cols:"3"},{default:(0,i.w5)((()=>[(0,i.Wm)(d.t,{icon:"mdi-refresh",onClick:c.refresh,class:"mr-5"},null,8,["onClick"])])),_:1})])),_:1}),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(c.user.friends.list,((e,n)=>((0,i.wg)(),(0,i.j4)(F.o,{key:n,class:"my-2"},{default:(0,i.w5)((()=>[(0,i.Wm)(O.D,{cols:"2",class:"d-flex align-center justify-end pa-0"},{default:(0,i.w5)((()=>[(0,i.wy)((0,i.Wm)(d.t,{icon:"mdi-pin-outline"},null,512),[[a.F8,e.is_top]])])),_:2},1024),(0,i.Wm)(O.D,{cols:"2",class:"d-flex align-center justify-center"},{default:(0,i.w5)((()=>[(0,i.Wm)(l.G,{bordered:"",bottom:"",dot:"","offset-x":"5","offset-y":"28",color:e.is_active?"green accent-4":"grey"},{default:(0,i.w5)((()=>[(0,i.Wm)(u,{path:e.avatar_url,name:e.nickname},null,8,["path","name"])])),_:2},1032,["color"])])),_:2},1024),(0,i.Wm)(O.D,{cols:"5",class:"d-flex align-center"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,k.zw)(e.nickname),1)])),_:2},1024),(0,i.Wm)(O.D,{cols:"3",class:"d-flex align-center"},{default:(0,i.w5)((()=>[(0,i.Wm)(T.T,{"offset-y":""},{activator:(0,i.w5)((({props:e})=>[(0,i.Wm)(s.T,(0,i.dG)({color:"primary"},e,{size:"x-small",icon:"mdi-dots-vertical "}),null,16)])),default:(0,i.w5)((()=>[(0,i.Wm)(U.B,{modelValue:o.dialog,"onUpdate:modelValue":t[0]||(t[0]=e=>o.dialog=e),transition:"dialog-bottom-transition",scrollable:""},{activator:(0,i.w5)((({props:e})=>[(0,i.Wm)(I.i,null,{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.actions,((t,a)=>((0,i.wg)(),(0,i.j4)(V.l,{key:a},{default:(0,i.w5)((()=>[(0,i.Wm)(S.V,(0,i.dG)({onClick:e=>t.click(c.user.friends.list[n].id)},0==a?e:""),{default:(0,i.w5)((()=>[(0,i.Uk)((0,k.zw)(c.user.friends.list[n].is_top&&2==a?"取消置顶":t.name),1)])),_:2},1040,["onClick"])])),_:2},1024)))),128))])),_:2},1024)])),default:(0,i.w5)((()=>[(0,i.Wm)(A._,null,{default:(0,i.w5)((()=>[(0,i.Wm)(L.K,null,{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.friend_collection,((e,t)=>((0,i.wg)(),(0,i.j4)(m,{key:t,id:e.movie_id},null,8,["id"])))),128)),(0,i.wy)((0,i.Wm)(F.o,null,{default:(0,i.w5)((()=>[(0,i.Wm)(O.D,{cols:"4",class:"d-flex justify-center"},{default:(0,i.w5)((()=>[(0,i.Wm)(d.t,{icon:"mdi-emoticon-sad-outline"})])),_:1}),(0,i.Wm)(O.D,null,{default:(0,i.w5)((()=>[M])),_:1})])),_:1},512),[[a.F8,!o.friend_collection.length]])])),_:2},1024)])),_:2},1024)])),_:2},1032,["modelValue"])])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128)),(0,i.Wm)(D.J),(0,i.Wm)(I.i,{nav:"",dense:""},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.items,((e,t)=>((0,i.wg)(),(0,i.j4)(U.B,{transition:"dialog-bottom-transition",key:t,scrollable:""},{default:(0,i.w5)((({props:t})=>[(0,i.Wm)(A._,(0,i.dG)({value:e},t,{"max-height":"500"}),{default:(0,i.w5)((()=>[((0,i.wg)(),(0,i.j4)((0,i.LL)(e.dialog)))])),_:2},1040,["value"])])),activator:(0,i.w5)((({props:t})=>[(0,i.Wm)(V.l,(0,i.dG)({value:e,"active-color":"primary"},t),{default:(0,i.w5)((()=>[(0,i.Wm)(N.U,{start:""},{default:(0,i.w5)((()=>[(0,i.Wm)(d.t,{icon:e.icon},null,8,["icon"])])),_:2},1024),(0,i.Wm)(S.V,null,{default:(0,i.w5)((()=>[(0,i.Uk)((0,k.zw)(e.text),1)])),_:2},1024)])),_:2},1040,["value"])])),_:2},1024)))),128))])),_:1}),(0,i.Wm)(D.J)])),_:1},8,["modelValue"])}var B=n(4126),H=n(9162),G=n(2900),Y=n(9201),R=n(2902);const J=(0,i.Uk)("发送申请");function Q(e,t,n,a,r,o){return(0,i.wg)(),(0,i.j4)(L.K,null,{default:(0,i.w5)((()=>[(0,i.Wm)(F.o,null,{default:(0,i.w5)((()=>[(0,i.Wm)(O.D,{class:"d-flex justify-center"},{default:(0,i.w5)((()=>[(0,i.Wm)(R.h,{modelValue:r.name,"onUpdate:modelValue":t[0]||(t[0]=e=>r.name=e),variant:"outlined",label:"好友用户名",style:{width:"120px"}},null,8,["modelValue"])])),_:1})])),_:1}),(0,i.Wm)(F.o,null,{default:(0,i.w5)((()=>[(0,i.Wm)(O.D,{class:"d-flex justify-center"},{default:(0,i.w5)((()=>[(0,i.Wm)(s.T,{color:"primary",onClick:t[1]||(t[1]=e=>o.addFriend())},{default:(0,i.w5)((()=>[J])),_:1})])),_:1})])),_:1}),(0,i.Wm)(m.v,{modelValue:r.snackbar.appear,"onUpdate:modelValue":t[2]||(t[2]=e=>r.snackbar.appear=e),color:r.snackbar.color},{default:(0,i.w5)((()=>[(0,i.Uk)((0,k.zw)(r.snackbar.msg),1)])),_:1},8,["modelValue","color"])])),_:1})}var X={components:{},data(){return{name:"",snackbar:{appear:!1,color:"",msg:""}}},methods:{async addFriend(){const e=await G.Z.friend.addFriend(this.name);e.updateSuccess?Object.assign(this.snackbar,{appear:!0,color:"success",msg:"申请发送成功"}):Object.assign(this.snackbar,{appear:!0,color:"warning",msg:e.err})}}};const ee=(0,$.Z)(X,[["render",Q]]);var te=ee,ne=n(3121);const ae=(0,i.Uk)(" 上传 "),ie=(0,i.Uk)("mdi-cloud-upload");function re(e,t,n,a,r,o){return(0,i.wg)(),(0,i.j4)(L.K,null,{default:(0,i.w5)((()=>[(0,i.Wm)(F.o,{"no-gutters":"",class:"d-flex justify-center align-center"},{default:(0,i.w5)((()=>[(0,i.Wm)(O.D,null,{default:(0,i.w5)((()=>[(0,i.Wm)(ne.Z,{accept:"image/*","show-size":"",variant:"outlined",style:{width:"200px"},label:"选择头像","prepend-icon":"mdi-image-outline",modelValue:r.currentFile,"onUpdate:modelValue":t[0]||(t[0]=e=>r.currentFile=e)},null,8,["modelValue"])])),_:1})])),_:1}),(0,i.Wm)(F.o,null,{default:(0,i.w5)((()=>[(0,i.Wm)(O.D,{class:"d-flex justify-center align-center"},{default:(0,i.w5)((()=>[(0,i.Wm)(s.T,{color:"success",dark:"",small:"",onClick:o.upload},{default:(0,i.w5)((()=>[ae,(0,i.Wm)(d.t,{right:"",dark:""},{default:(0,i.w5)((()=>[ie])),_:1})])),_:1},8,["onClick"])])),_:1})])),_:1}),(0,i.Wm)(m.v,{modelValue:r.snackbar.appear,"onUpdate:modelValue":t[1]||(t[1]=e=>r.snackbar.appear=e),color:r.snackbar.color},{default:(0,i.w5)((()=>[(0,i.Uk)((0,k.zw)(r.snackbar.msg),1)])),_:1},8,["modelValue","color"])])),_:1})}var oe={data(){return{currentFile:void 0,snackbar:{appear:!1,color:"",msg:""}}},methods:{upload(){this.currentFile?G.Z.uploadAvatar(this.currentFile[0]).then((()=>{Object.assign(this.snackbar,{appear:!0,color:"success",msg:"上传成功"})})).catch((()=>{Object.assign(this.snackbar,{appear:!0,color:"error",msg:"上传失败"}),this.currentFile=void 0})):this.message="Please select a file!"}}};const le=(0,$.Z)(oe,[["render",re]]);var se=le;function de(e,t,n,a,r,o){const l=(0,i.up)("MovieList");return(0,i.wg)(),(0,i.j4)(L.K,null,{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(r.movies,((e,t)=>((0,i.wg)(),(0,i.j4)(l,{key:t,class:"pl-2",id:e.movie_id},null,8,["id"])))),128))])),_:1})}var ce=n(3020),ue={created(){ce.Z.history.readVisited().then((e=>this.movies=e))},data(){return{movies:[]}},components:{MovieList:B.Z}};const me=(0,$.Z)(ue,[["render",de]]);var fe=me,pe=n(8389);const ge=(0,i.Uk)("没有收到好友申请");function he(e,t,n,r,o,l){const s=(0,i.up)("UserAvatar");return(0,i.wg)(),(0,i.j4)(L.K,null,{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.friends,((e,t)=>((0,i.wg)(),(0,i.j4)(I.i,{key:t},{default:(0,i.w5)((()=>[(0,i.Wm)(V.l,null,{default:(0,i.w5)((()=>[(0,i.Wm)(s,{class:"mr-4",path:e.avatar,name:e.nickname},null,8,["path","name"]),(0,i.Wm)(V.l,{width:"100",title:e.nickname,class:"px-0"},null,8,["title"]),(0,i.Wm)(pe.m,null,{default:(0,i.w5)((()=>[(0,i.Wm)(d.t,{onClick:e=>l.accept(t),icon:"mdi-check",class:"mr-2"},null,8,["onClick"]),(0,i.Wm)(d.t,{onClick:e=>l.reject(t),icon:"mdi-close"},null,8,["onClick"])])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128)),(0,i.wy)((0,i.Wm)(F.o,null,{default:(0,i.w5)((()=>[(0,i.Wm)(O.D,{cols:"2",class:"d-flex justify-center"},{default:(0,i.w5)((()=>[(0,i.Wm)(d.t,{icon:"mdi-emoticon-sad-outline"})])),_:1}),(0,i.Wm)(O.D,null,{default:(0,i.w5)((()=>[ge])),_:1})])),_:1},512),[[a.F8,!l.friends.length]])])),_:1})}var we={components:{UserAvatar:H.Z},created(){G.Z.friend.readInfo()},computed:{friends(){return this.$store.state.user.friends.apply}},data(){return{}},methods:{accept(e){G.Z.friend.acceptApply(this.friends[e].id)},reject(e){G.Z.friend.rejectApply(this.friends[e].id)}}};const ve=(0,$.Z)(we,[["render",he]]);var ye=ve,_e={components:{MovieList:B.Z,UserAvatar:H.Z,AddFriend:te,EditAvatar:se,ShowHistroy:fe,ShowApply:ye},computed:{user(){return this.$store.state.user}},created(){G.Z.friend.readInfo()},data(){return{drawer:!1,dialog:!1,items:[{text:"添加好友",icon:"mdi-account-multiple-plus-outline",dialog:"AddFriend"},{text:"查看申请",icon:"mdi-message-outline",dialog:"ShowApply"},{text:"修改头像",icon:"mdi-image-edit-outline",dialog:"EditAvatar"},{text:"历史记录",icon:"mdi-history",dialog:"ShowHistroy"}],actions:[{name:"查看收藏",click:this.getFriendMovies},{name:"删除好友",click:this.deleteFriend},{name:"设为置顶",click:this.pinTop}],friend_collection:[]}},methods:{logout:G.Z.logout,changeDrawer(){this.drawer=!this.drawer},deleteFriend(e){G.Z.friend.deleteFriend(e)},pinTop(e){G.Z.friend.pinTop(e)},async getFriendMovies(e){this.friend_collection=await Y.Z.getFriendMovies(e)},refresh(){G.Z.friend.readInfo()}}};const be=(0,$.Z)(_e,[["render",q]]);var ke=be,Ze=n(1844),We={name:"App",components:{ButtomNavigation:C,DrawerNavigation:ke,UserAvatar:H.Z},created(){sessionStorage.getItem("store")&&this.$store.replaceState(Object.assign({},this.$store.state,JSON.parse(sessionStorage.getItem("store")))),window.addEventListener("beforeunload",(()=>{sessionStorage.setItem("store",JSON.stringify(this.$store.state))}))},mounted(){this.user.isLogin?this.$router.push("/home"):this.$router.push("/login"),this.heartbeat(),this.timer=setInterval(this.heartbeat,6e4)},data(){return{timer:"",drawer:!1,group:null,topLevelPages:[{name:"主页",path:"/home",icon:"mdi-home"},{name:"收藏",path:"/collection",icon:"mdi-heart"},{name:"筛选",path:"/filter",icon:"mdi-filter"}]}},computed:{isTopLevelPage(){return this.topLevelPages.map((e=>e.path)).includes(this.$route.path)},user(){return this.$store.state.user}},methods:{goBack(){this.$router.back()},upload:Ze.Z.upload,async heartbeat(){this.user.isLogin&&(await G.Z.postActive(),G.Z.readActive(this.user.info.id))}},beforeUnmount(){clearInterval(this.timer)}};const je=(0,$.Z)(We,[["render",b]]);var $e=je,xe=(n(9773),n(9811)),Ce=(0,xe.Rd)();async function Ae(){const e=await n.e(461).then(n.t.bind(n,3657,23));e.load({google:{families:["Roboto:100,300,400,500,700,900&display=swap"]}})}var Ue=n(1120),De=n(4239),Fe=n(8108),Oe=n(3065),Le=n(5129),Ie=n.n(Le);Ae();const Ve=(0,a.ri)($e);Ve.config.globalProperties.$axios=Fe.Z,Ve.use(Ie()).use(Oe.VueWindowSizePlugin).use(De.Z).use(Ue.N).use(Ce).mount("#app")},1120:function(e,t,n){n.d(t,{N:function(){return r}});var a=n(678);const i=[{name:"notFound",path:"/:path(.*)+"},{name:"login",path:"/login",component:()=>n.e(426).then(n.bind(n,7426)),meta:{title:"登录"}},{name:"register",path:"/register",component:()=>n.e(926).then(n.bind(n,6926)),meta:{title:"注册"}},{name:"search",path:"/search",component:()=>Promise.all([n.e(993),n.e(396)]).then(n.bind(n,8394)),meta:{title:"搜索"}},{name:"home",path:"/home",component:()=>n.e(152).then(n.bind(n,1152)),meta:{title:"主页"}},{name:"collection",path:"/collection",component:()=>n.e(400).then(n.bind(n,4400)),meta:{title:"收藏"}},{name:"filter",path:"/filter",component:()=>Promise.all([n.e(993),n.e(385)]).then(n.bind(n,1804)),meta:{title:"筛选"}},{name:"video",path:"/video/:id",component:()=>n.e(382).then(n.bind(n,2382)),meta:{title:"视频"}},{name:"user",path:"/user",component:()=>n.e(734).then(n.bind(n,1734)),meta:{title:"用户"}}],r=(0,a.p7)({routes:i,history:(0,a.r5)()});r.beforeEach(((e,t,n)=>{const a=e.meta&&e.meta.title;a&&(document.title=a),n()}))},4239:function(e,t,n){var a=n(65);t["Z"]=(0,a.MT)({state(){return{unfinished:!1,user:{token:"",isLogin:!1,isActive:!1,expired:!1,info:{id:"未知",name:"未知",nickname:"未知",email:"未知",avatar_url:"未知"},friends:{apply:[]}},collections:[],movies:[{id:"343611",likes:0,comments:[{avatarUrl:"https://cdn.vuetifyjs.com/images/john.png",author:"张三",content:"这是一条评论",date:"2022-06-01"},{avatarUrl:"https://cdn.vuetifyjs.com/images/john.png",author:"李四",content:"这是一条评论",date:"2022-06-02"}]}],history:[1,2,3]}},mutations:{login(e,t){Object.assign(e.user,{token:t,isLogin:!0,expired:!1})},logout(e){Object.assign(e.user,{token:"",isLogin:!1,expired:!1})},expire(e){Object.assign(e.user,{token:"",isLogin:!1,expired:!0})},readActive(e,t){e.user.isActive=t},setActive(e){e.user.isActive=!0},setUser(e,t){e.user.info=t},setFriend(e,t){e.user.friends=t},setCollection(e,t){e.collections=t},alertUnfinished(e){e.unfinished=!0,setTimeout((()=>{e.unfinished=!1}),2e3)}}})},8108:function(e,t,n){var a=n(6265),i=n.n(a),r=n(4239),o=n(1120);i().defaults.timeout=1e4,i().defaults.baseURL="http://127.0.0.1:7001/api/v1",i().interceptors.request.use((e=>(r.Z.state.user.isLogin&&(e.headers.Authorization=`bearer ${r.Z.state.user.token}`),e)),(e=>Promise.reject(e))),i().interceptors.response.use((e=>e.data),(e=>("jwt expired"==e.response.data.message&&(r.Z.commit("expire"),o.N.push("/login")),Promise.reject(e)))),t["Z"]=i()},4126:function(e,t,n){n.d(t,{Z:function(){return y}});var a=n(3396),i=n(7139),r=n(3369),o=n(6824),l=n(8521),s=n(1358),d=n(1392),c=n(2127),u=n(7769),m=n(3173);const f=["src"];function p(e,t,n,p,g,h){return(0,a.wg)(),(0,a.j4)(s.l,{lines:"three"},{default:(0,a.w5)((()=>[(0,a.Wm)(r.K,null,{default:(0,a.w5)((()=>[(0,a.Wm)(o.o,{class:"d-flex text-center justify-center margin-center"},{default:(0,a.w5)((()=>[g.loading?((0,a.wg)(),(0,a.j4)(m.L,{key:0,indeterminate:"",color:"primary"})):(0,a.kq)("",!0)])),_:1}),g.loading?(0,a.kq)("",!0):((0,a.wg)(),(0,a.j4)(o.o,{key:0,onClick:t[0]||(t[0]=t=>e.$router.push({path:`/video/${n.id}`}))},{default:(0,a.w5)((()=>[(0,a.Wm)(l.D,{cols:"3"},{default:(0,a.w5)((()=>[(0,a._)("img",{src:g.src,alt:"",style:{height:"100px",width:"60px"}},null,8,f)])),_:1}),(0,a.Wm)(l.D,{cols:"9"},{default:(0,a.w5)((()=>[(0,a.Wm)(d.R,null,{default:(0,a.w5)((()=>[(0,a.Wm)(c.V,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,i.zw)(g.title),1)])),_:1}),(0,a.Wm)(u.o,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,i.zw)(g.description),1)])),_:1}),(0,a.Wm)(u.o,{class:"pt-2"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,i.zw)(g.tag),1)])),_:1})])),_:1})])),_:1})])),_:1}))])),_:1})])),_:1})}var g=n(3020),h={setup(){},data(){return{title:"加载中",description:"",tag:"",src:"",loading:!0}},created(){this.fetchData()},watch:{id:function(){this.fetchData()}},props:{id:String},methods:{async fetchData(){g.Z.detail(this.id).then((e=>{Object.assign(this,e),this.loading=!1}))}}},w=n(89);const v=(0,w.Z)(h,[["render",p]]);var y=v},9162:function(e,t,n){n.d(t,{Z:function(){return p}});var a=n(3396),i=n(7139),r=n(652);const o=["src"],l={key:1,class:"white--text text-h5"};function s(e,t,n,s,d,c){return(0,a.wg)(),(0,a.j4)(r.V,{size:"40",color:n.name?c.uniqolor(n.name[0]).color:"white"},{default:(0,a.w5)((()=>[n.path?((0,a.wg)(),(0,a.iD)("img",{key:0,src:`http://127.0.0.1:7001${n.path}`},null,8,o)):((0,a.wg)(),(0,a.iD)("span",l,(0,i.zw)(n.name?n.name[0]:"未知"),1))])),_:1},8,["color"])}var d=n(4643),c=n.n(d),u={props:{id:{type:Number},path:String,name:String},methods:{uniqolor:c()}},m=n(89);const f=(0,m.Z)(u,[["render",s]]);var p=f}},t={};function n(a){var i=t[a];if(void 0!==i)return i.exports;var r=t[a]={id:a,loaded:!1,exports:{}};return e[a].call(r.exports,r,r.exports,n),r.loaded=!0,r.exports}n.m=e,function(){var e=[];n.O=function(t,a,i,r){if(!a){var o=1/0;for(c=0;c<e.length;c++){a=e[c][0],i=e[c][1],r=e[c][2];for(var l=!0,s=0;s<a.length;s++)(!1&r||o>=r)&&Object.keys(n.O).every((function(e){return n.O[e](a[s])}))?a.splice(s--,1):(l=!1,r<o&&(o=r));if(l){e.splice(c--,1);var d=i();void 0!==d&&(t=d)}}return t}r=r||0;for(var c=e.length;c>0&&e[c-1][2]>r;c--)e[c]=e[c-1];e[c]=[a,i,r]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};n.t=function(a,i){if(1&i&&(a=this(a)),8&i)return a;if("object"===typeof a&&a){if(4&i&&a.__esModule)return a;if(16&i&&"function"===typeof a.then)return a}var r=Object.create(null);n.r(r);var o={};e=e||[null,t({}),t([]),t(t)];for(var l=2&i&&a;"object"==typeof l&&!~e.indexOf(l);l=t(l))Object.getOwnPropertyNames(l).forEach((function(e){o[e]=function(){return a[e]}}));return o["default"]=function(){return a},n.d(r,o),r}}(),function(){n.d=function(e,t){for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,a){return n.f[a](e,t),t}),[]))}}(),function(){n.u=function(e){return"js/"+(461===e?"webfontloader":e)+"."+{152:"a41aff9f",382:"bfa284de",385:"4a92a0f9",396:"7f607644",400:"868a72ee",426:"8fad4374",461:"2cfa36e2",734:"0d030aad",926:"93dadfed",993:"bffb5d56"}[e]+".js"}}(),function(){n.miniCssF=function(e){return"css/"+e+"."+{152:"57fc0e67",382:"4521c275",385:"73c5b9a0",396:"04819120",400:"3d977ef9",926:"e2270cb0"}[e]+".css"}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="hublix:";n.l=function(a,i,r,o){if(e[a])e[a].push(i);else{var l,s;if(void 0!==r)for(var d=document.getElementsByTagName("script"),c=0;c<d.length;c++){var u=d[c];if(u.getAttribute("src")==a||u.getAttribute("data-webpack")==t+r){l=u;break}}l||(s=!0,l=document.createElement("script"),l.charset="utf-8",l.timeout=120,n.nc&&l.setAttribute("nonce",n.nc),l.setAttribute("data-webpack",t+r),l.src=a),e[a]=[i];var m=function(t,n){l.onerror=l.onload=null,clearTimeout(f);var i=e[a];if(delete e[a],l.parentNode&&l.parentNode.removeChild(l),i&&i.forEach((function(e){return e(n)})),t)return t(n)},f=setTimeout(m.bind(null,void 0,{type:"timeout",target:l}),12e4);l.onerror=m.bind(null,l.onerror),l.onload=m.bind(null,l.onload),s&&document.head.appendChild(l)}}}(),function(){n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){n.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){n.p=""}(),function(){var e=function(e,t,n,a){var i=document.createElement("link");i.rel="stylesheet",i.type="text/css";var r=function(r){if(i.onerror=i.onload=null,"load"===r.type)n();else{var o=r&&("load"===r.type?"missing":r.type),l=r&&r.target&&r.target.href||t,s=new Error("Loading CSS chunk "+e+" failed.\n("+l+")");s.code="CSS_CHUNK_LOAD_FAILED",s.type=o,s.request=l,i.parentNode.removeChild(i),a(s)}};return i.onerror=i.onload=r,i.href=t,document.head.appendChild(i),i},t=function(e,t){for(var n=document.getElementsByTagName("link"),a=0;a<n.length;a++){var i=n[a],r=i.getAttribute("data-href")||i.getAttribute("href");if("stylesheet"===i.rel&&(r===e||r===t))return i}var o=document.getElementsByTagName("style");for(a=0;a<o.length;a++){i=o[a],r=i.getAttribute("data-href");if(r===e||r===t)return i}},a=function(a){return new Promise((function(i,r){var o=n.miniCssF(a),l=n.p+o;if(t(o,l))return i();e(a,l,i,r)}))},i={143:0};n.f.miniCss=function(e,t){var n={152:1,382:1,385:1,396:1,400:1,926:1};i[e]?t.push(i[e]):0!==i[e]&&n[e]&&t.push(i[e]=a(e).then((function(){i[e]=0}),(function(t){throw delete i[e],t})))}}(),function(){var e={143:0};n.f.j=function(t,a){var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)a.push(i[2]);else{var r=new Promise((function(n,a){i=e[t]=[n,a]}));a.push(i[2]=r);var o=n.p+n.u(t),l=new Error,s=function(a){if(n.o(e,t)&&(i=e[t],0!==i&&(e[t]=void 0),i)){var r=a&&("load"===a.type?"missing":a.type),o=a&&a.target&&a.target.src;l.message="Loading chunk "+t+" failed.\n("+r+": "+o+")",l.name="ChunkLoadError",l.type=r,l.request=o,i[1](l)}};n.l(o,s,"chunk-"+t,t)}},n.O.j=function(t){return 0===e[t]};var t=function(t,a){var i,r,o=a[0],l=a[1],s=a[2],d=0;if(o.some((function(t){return 0!==e[t]}))){for(i in l)n.o(l,i)&&(n.m[i]=l[i]);if(s)var c=s(n)}for(t&&t(a);d<o.length;d++)r=o[d],n.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return n.O(c)},a=self["webpackChunkhublix"]=self["webpackChunkhublix"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=n.O(void 0,[998],(function(){return n(8153)}));a=n.O(a)})();
//# sourceMappingURL=app.b7decab4.js.map