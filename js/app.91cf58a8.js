(function(){"use strict";var e={9201:function(e,t,a){var n=a(8108),i=a(4239);t["Z"]={async create(){return n.Z.post("/collection").then((()=>this.readInfo()))},async addMovie(e,t){return n.Z.post(`/collection/${e}/movie/${t}`).then((()=>this.readInfo()))},async deleteMovie(e){const t=await n.Z.get("/collection/all");t.map((t=>{n.Z["delete"](`/collection/${t.id}/movie/${e}`).then((()=>this.readInfo()))}))},async existMovie(e){return await n.Z.get(`/collection/exist?movie_id=${e}`)},async getFriendMovies(e){const{default_collection:t}=await n.Z.get(`/user/${e}`);return await n.Z.get(`/collection/${t}/movie/all`)},async getAllCollections(){return await n.Z.get("/collection/all")},async readInfo(){i.Z.commit("setCollection",await(await n.Z.get("/collection/all")).reduce((async(e,t)=>(await e).concat({name:t.name,id:t.id,movies:await(await n.Z.get(`/collection/${t.id}/movie/all`)).reduce((async(e,t)=>(await e).concat({id:t.movie_id})),[])})),[]))},async update(e,t){return n.Z.post(`/collection/${e}`,{name:t}).then((()=>this.readInfo()))},async delete(e){return n.Z["delete"](`/collection/${e}`).then((()=>this.readInfo()))}}},1844:function(e,t,a){var n=a(8108);t["Z"]={sendCode(e){return n.Z.post("/email",{address:e})},async verifyCode(e,t){return n.Z.get(`/email?address=${e}&code=${t}`).then((e=>e.verifySuccess))},upload(e){let t=new FormData;return t.append("file",e),n.Z.post("/upload/avatar",t)}}},3020:function(e,t,a){var n=a(8108);t["Z"]={that:void 0,search(e){return n.Z.get(`https://api.themoviedb.org/3/search/movie?api_key=3f5ff60226b0f8730f299dfd0c20bae7&query=${e}&language=zh-CN&page=1&include_adult=false`).then((e=>e.results.map((e=>({title:e.title,id:e.id})))))},async detail(e){return n.Z.get(`https://api.themoviedb.org/3/movie/${e}?api_key=3f5ff60226b0f8730f299dfd0c20bae7&language=zh-CN`).then((e=>({title:e.title,src:`https://image.tmdb.org/t/p/original${e.poster_path}`,rating:e.vote_average/2,imdbId:e.imdb_id,description:e.overview,tag:e.tagline})))},async trailerUrl(e){return n.Z.get(`https://www.googleapis.com/youtube/v3/search?part=snippet&key=AIzaSyDNZjCIoK5wTgRumy6lUJn3PSpaBvD8Vf4&q=${e}&type=video&maxResults=1`).then((e=>({videoID:e.items[0].id.videoId,videoUrl:`https://www.youtube.com/embed/${e.items[0].id.videoId}`})))},async nowPlaying(){return n.Z.get("https://api.themoviedb.org/3/movie/now_playing?api_key=3f5ff60226b0f8730f299dfd0c20bae7&language=zh-CN&page=1&include_adult=false").then((e=>e.results.map((e=>e.id)).slice(0,6)))},async popular(){return n.Z.get("https://api.themoviedb.org/3/movie/popular?api_key=3f5ff60226b0f8730f299dfd0c20bae7&language=zh-CN&page=1&include_adult=false").then((e=>e.results.map((e=>e.id)).slice(0,6)))},async topRated(){return n.Z.get("https://api.themoviedb.org/3/movie/top_rated?api_key=3f5ff60226b0f8730f299dfd0c20bae7&language=zh-CN&page=1&include_adult=false").then((e=>e.results.map((e=>e.id)).slice(0,6)))},async upcoming(){return n.Z.get("https://api.themoviedb.org/3/movie/upcoming?api_key=3f5ff60226b0f8730f299dfd0c20bae7&language=zh-CN&page=1&include_adult=false").then((e=>e.results.map((e=>e.id)).slice(0,6)))},async filter(e,t,a,i){return n.Z.get(`https://api.themoviedb.org/3/discover/movie?api_key=3f5ff60226b0f8730f299dfd0c20bae7&language=zh-CN&sort_by=${i}.desc&include_adult=false&page=${e}&primary_release_year=${t}&with_genres=${a}`).then((e=>({list:e.results.map((e=>e.id)),totalResults:e.total_results})))},async genres(){return n.Z.get("https://api.themoviedb.org/3/genre/movie/list?api_key=3f5ff60226b0f8730f299dfd0c20bae7&language=zh-CN").then((e=>e.genres.map((e=>({id:e.id,name:e.name})))))},async likes(e){return(await n.Z.get(`/movie/${e}`,{id:e})).like_count},attitude:{like(e){return n.Z.post(`/movie/${e}/attitude`,{id:e})},async read(e){return(await n.Z.get(`/movie/${e}/attitude`,{id:e})).attitude},dislike(e){return n.Z["delete"](`/movie/${e}/attitude`,{id:e})}},comment:{async create(e,t){await n.Z.post(`/comment/movie/${e}`,{content:t})},async readAll(e){return await(await n.Z.get(`/comment/movie/${e}`)).reduce((async(e,t)=>{const a=await n.Z.get(`/user/${t.user_id}`);return(await e).concat({name:a.name,content:t.content,date:t.created_time,avatar_url:a.avatar_url,id:t.id})}),[])},async update(e,t){await n.Z.post(`/comment/${e}`,{content:t})},async delete(e){await n.Z["delete"](`/comment/${e}`)}},history:{onVisited(e){return n.Z.post(`/history/watch/movie/${e}`)},readVisited(){return n.Z.get("/history/watch/movie")},async onSearched(e){await n.Z.post(`/history/search/movie/${e}`)},async clear(){await n.Z["delete"]("/history/search/all")},async readSearched(){const e=await n.Z.get("/history/search/movie");return Promise.all(e.map((async e=>({id:parseInt(e.movie_id),name:(await this.detail(e.movie_id)).title}))))},async detail(e){return n.Z.get(`https://api.themoviedb.org/3/movie/${e}?api_key=3f5ff60226b0f8730f299dfd0c20bae7&language=zh-CN`).then((e=>({title:e.title,src:`https://image.tmdb.org/t/p/original${e.poster_path}`,rating:e.vote_average/2,imdbId:e.imdb_id,description:e.overview,tag:e.tagline})))}}}},2900:function(e,t,a){var n=a(8108),i=a(4239),r=a(1120);t["Z"]={async login({username:e,password:t}){i.Z.commit("login",await n.Z.post("/session/token",{username:e,password:t})),this.readInfo()},register({username:e,password:t,nickname:a,email:i}){return n.Z.post("/user",{username:e,password:t,nickname:a,email:i})},async logout(){await n.Z.post("/user/logout"),i.Z.commit("logout"),r.N.push("/login")},async readActive(e){return n.Z.get(`/user/${e}/online`).then((e=>i.Z.commit("readActive",e)))},postActive(){return n.Z.post("/user/online")},async uploadAvatar(e){let t=new FormData;return t.append("name","file"),t.append("file",e),n.Z.post("/upload/avatar",t,{headers:{"Content-Type":"multipart/form-data"}}).then((()=>this.readInfo()))},async readInfo(){return i.Z.commit("setUser",await n.Z.get("/user"))},friend:{addFriend(e){return n.Z.post("/friend/apply",{name:e})},async deleteFriend(e){return n.Z["delete"](`/friend/${e}`).then((()=>this.readInfo()))},async acceptApply(e){return n.Z.post(`/friend/${e}/accept`).then((()=>this.readInfo()))},async rejectApply(e){return n.Z.post(`/friend/${e}/reject`).then((()=>this.readInfo()))},async pinTop(e){return n.Z.post(`/friend/${e}/pin`).then((()=>this.readInfo()))},async readInfo(){i.Z.commit("setFriend",{apply:await(await n.Z.get("/friend/apply/all")).reduce((async(e,t)=>(await e).concat(await n.Z.get(`/user/${t.friend_id}`))),[]),list:await(await n.Z.get("/friend/all")).reduce((async(e,t)=>(await e).concat(Object.assign(await n.Z.get(`/user/${t.friend_id}`),{is_top:t.is_top,is_active:await n.Z.get(`/user/${t.friend_id}/online`)}))),[])})}}}},6411:function(e,t,a){var n=a(9242),i=a(3396),r=a(1434),o=a(9797),l=a(7571),s=a(1556),c=a(7589),d=a(8281),u=a(4959),m=a(1802),f=a(4606),p=a(230),g=a(8952);const h=(0,i.Uk)("mdi-arrow-left"),w=(0,i.Uk)("随意影视"),v=(0,i.Uk)("mdi-magnify"),y=(0,i.Uk)(" 登录过期，请重新登录 "),_=(0,i.Uk)("功能还在建设中");function b(e,t,a,b,k,Z){const W=(0,i.up)("UserAvatar"),j=(0,i.up)("DrawerNavigation"),$=(0,i.up)("router-view"),x=(0,i.up)("ButtomNavigation");return(0,i.wg)(),(0,i.j4)(o.q,null,{default:(0,i.w5)((()=>[(0,i.Wm)(l.L,{app:"",image:"/appbar.png"},{image:(0,i.w5)((()=>[(0,i.Wm)(m.f,{gradient:"to top right, rgba(19,84,122,.8), rgba(128,208,199,.8)"})])),default:(0,i.w5)((()=>[Z.isTopLevelPage?(0,i.wy)(((0,i.wg)(),(0,i.j4)(d.T,{key:0,icon:"",onClick:t[0]||(t[0]=(0,n.iM)((e=>this.$refs.drawer.changeDrawer()),["stop"]))},{default:(0,i.w5)((()=>[(0,i.Wm)(c.G,{bordered:"",bottom:"",color:Z.user.isActive?"green accent-4":"grey",dot:"","offset-x":"5","offset-y":"28"},{default:(0,i.w5)((()=>[(0,i.Wm)(W,{name:Z.user.info.nickname,path:Z.user.info.avatar_url},null,8,["name","path"])])),_:1},8,["color"])])),_:1},512)),[[n.F8,Z.user.isLogin]]):(0,i.wy)(((0,i.wg)(),(0,i.j4)(d.T,{key:1,icon:"",onClick:Z.goBack},{default:(0,i.w5)((()=>[(0,i.Wm)(u.t,null,{default:(0,i.w5)((()=>[h])),_:1})])),_:1},8,["onClick"])),[[n.F8,Z.user.isLogin]]),(0,i.Wm)(s.o,{class:"ml-5"},{default:(0,i.w5)((()=>[w])),_:1}),(0,i.wy)((0,i.Wm)(d.T,{icon:"",to:"/search"},{default:(0,i.w5)((()=>[(0,i.Wm)(u.t,null,{default:(0,i.w5)((()=>[v])),_:1})])),_:1},512),[[n.F8,Z.user.isLogin]])])),_:1}),Z.user.isLogin?((0,i.wg)(),(0,i.j4)(j,{key:0,ref:"drawer"},null,512)):(0,i.kq)("",!0),(0,i.Wm)(f.O,null,{default:(0,i.w5)((()=>[(0,i.Wm)($,null,{default:(0,i.w5)((({Component:e})=>[(0,i.Wm)(g.Qn,null,{default:(0,i.w5)((()=>[((0,i.wg)(),(0,i.j4)((0,i.LL)(e)))])),_:2},1024)])),_:1})])),_:1}),Z.user.isLogin?((0,i.wg)(),(0,i.j4)(x,{key:1,pages:k.topLevelPages},null,8,["pages"])):(0,i.kq)("",!0),(0,i.Wm)(p.v,{modelValue:this.user.expired,"onUpdate:modelValue":t[1]||(t[1]=e=>this.user.expired=e),color:"warning"},{default:(0,i.w5)((()=>[y])),_:1},8,["modelValue"]),(0,i.wy)((0,i.Wm)(r.w,{type:"warning"},{default:(0,i.w5)((()=>[_])),_:1},512),[[n.F8,this.$store.state.unfinished]])])),_:1})}a(6699);var k=a(7139),Z=a(7328);function W(e,t,a,n,r,o){return(0,i.wg)(),(0,i.j4)(Z.N,{value:r.activeBtn,color:"primary","hide-on-scroll":"",grow:"",fluid:"",app:"",density:"comfortable"},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(a.pages,((e,t)=>((0,i.wg)(),(0,i.j4)(d.T,{key:t,to:e.path,value:e.name},{default:(0,i.w5)((()=>[(0,i.Wm)(u.t,{icon:e.icon},null,8,["icon"]),(0,i.Uk)(" "+(0,k.zw)(e.name),1)])),_:2},1032,["to","value"])))),128))])),_:1},8,["value"])}var j={data(){return{activeBtn:1}},props:{pages:{type:Array}}},$=a(89);const x=(0,$.Z)(j,[["render",W]]);var F=x,C=a(5701),A=a(1634),U=a(576),D=a(623),L=a(6824),O=a(8521),V=a(3369),T=a(5547),I=a(7653),N=a(2127),S=a(1347),z=a(4865);const P=(0,i._)("div",{style:{width:"75px"}},"我的好友",-1),E=(0,i.Uk)("空空如也"),M={class:"pa-2 d-flex justify-center"},B=(0,i.Uk)(" 退出账号 ");function K(e,t,a,r,o,l){const s=(0,i.up)("UserAvatar"),m=(0,i.up)("MovieList");return(0,i.wg)(),(0,i.j4)(z.V,{modelValue:o.drawer,"onUpdate:modelValue":t[2]||(t[2]=e=>o.drawer=e),app:"",temporary:""},{activator:(0,i.w5)((({props:e})=>[(0,i.Wm)(d.T,(0,i.dG)({color:"primary"},e,{size:"x-small",icon:"mdi-dots-vertical "}),null,16)])),append:(0,i.w5)((()=>[(0,i._)("div",M,[(0,i.Wm)(d.T,{color:"primary",onClick:t[1]||(t[1]=e=>l.logout())},{default:(0,i.w5)((()=>[(0,i.Wm)(u.t,{left:"",icon:"mdi-logout-variant"}),B])),_:1})])])),default:(0,i.w5)((()=>[(0,i.Wm)(T.i,null,{default:(0,i.w5)((()=>[(0,i.Wm)(I.l,null,{prepend:(0,i.w5)((()=>[(0,i.Wm)(C.V,{start:""},{default:(0,i.w5)((()=>[(0,i.Wm)(c.G,{bordered:"",bottom:"",color:l.user.isActive?"green accent-4":"grey",dot:"","offset-x":"5","offset-y":"28"},{default:(0,i.w5)((()=>[(0,i.Wm)(s,{name:l.user.info.nickname,path:l.user.info.avatar_url},null,8,["name","path"])])),_:1},8,["color"])])),_:1})])),default:(0,i.w5)((()=>[(0,i.Wm)(I.l,{title:l.user.info.nickname,subtitle:l.user.info.email,class:"px-0"},null,8,["title","subtitle"])])),_:1})])),_:1}),(0,i.Wm)(D.J),(0,i.Wm)(L.o,{class:"d-flex justify-end align-center mt-2"},{default:(0,i.w5)((()=>[(0,i.Wm)(O.D,{class:"pl-10",style:{"font-size":"13px"}},{default:(0,i.w5)((()=>[P])),_:1}),(0,i.Wm)(O.D,{cols:"3"},{default:(0,i.w5)((()=>[(0,i.Wm)(u.t,{icon:"mdi-refresh",onClick:l.refresh,class:"mr-5"},null,8,["onClick"])])),_:1})])),_:1}),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.user.friends.list,((e,a)=>((0,i.wg)(),(0,i.j4)(L.o,{key:a,class:"my-2"},{default:(0,i.w5)((()=>[(0,i.Wm)(O.D,{cols:"2",class:"d-flex align-center justify-end pa-0"},{default:(0,i.w5)((()=>[(0,i.wy)((0,i.Wm)(u.t,{icon:"mdi-pin-outline"},null,512),[[n.F8,e.is_top]])])),_:2},1024),(0,i.Wm)(O.D,{cols:"2",class:"d-flex align-center justify-center"},{default:(0,i.w5)((()=>[(0,i.Wm)(c.G,{bordered:"",bottom:"",dot:"","offset-x":"5","offset-y":"28",color:e.is_active?"green accent-4":"grey"},{default:(0,i.w5)((()=>[(0,i.Wm)(s,{path:e.avatar_url,name:e.nickname},null,8,["path","name"])])),_:2},1032,["color"])])),_:2},1024),(0,i.Wm)(O.D,{cols:"5",class:"d-flex align-center"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,k.zw)(e.nickname),1)])),_:2},1024),(0,i.Wm)(O.D,{cols:"3",class:"d-flex align-center"},{default:(0,i.w5)((()=>[(0,i.Wm)(S.T,{"offset-y":""},{activator:(0,i.w5)((({props:e})=>[(0,i.Wm)(d.T,(0,i.dG)({color:"primary"},e,{size:"x-small",icon:"mdi-dots-vertical "}),null,16)])),default:(0,i.w5)((()=>[(0,i.Wm)(U.B,{modelValue:o.dialog,"onUpdate:modelValue":t[0]||(t[0]=e=>o.dialog=e),transition:"dialog-bottom-transition",scrollable:""},{activator:(0,i.w5)((({props:e})=>[(0,i.Wm)(T.i,null,{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.actions,((t,n)=>((0,i.wg)(),(0,i.j4)(I.l,{key:n},{default:(0,i.w5)((()=>[(0,i.Wm)(N.V,(0,i.dG)({onClick:e=>t.click(l.user.friends.list[a].id)},0==n?e:""),{default:(0,i.w5)((()=>[(0,i.Uk)((0,k.zw)(l.user.friends.list[a].is_top&&2==n?"取消置顶":t.name),1)])),_:2},1040,["onClick"])])),_:2},1024)))),128))])),_:2},1024)])),default:(0,i.w5)((()=>[(0,i.Wm)(A._,null,{default:(0,i.w5)((()=>[(0,i.Wm)(V.K,null,{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.friend_collection,((e,t)=>((0,i.wg)(),(0,i.j4)(m,{key:t,id:e.movie_id},null,8,["id"])))),128)),(0,i.wy)((0,i.Wm)(L.o,null,{default:(0,i.w5)((()=>[(0,i.Wm)(O.D,{cols:"4",class:"d-flex justify-center"},{default:(0,i.w5)((()=>[(0,i.Wm)(u.t,{icon:"mdi-emoticon-sad-outline"})])),_:1}),(0,i.Wm)(O.D,null,{default:(0,i.w5)((()=>[E])),_:1})])),_:1},512),[[n.F8,!o.friend_collection.length]])])),_:2},1024)])),_:2},1024)])),_:2},1032,["modelValue"])])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128)),(0,i.Wm)(D.J),(0,i.Wm)(T.i,{nav:"",dense:""},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.items,((e,t)=>((0,i.wg)(),(0,i.j4)(U.B,{transition:"dialog-bottom-transition",key:t,scrollable:""},{default:(0,i.w5)((({props:t})=>[(0,i.Wm)(A._,(0,i.dG)({value:e},t,{"max-height":"500"}),{default:(0,i.w5)((()=>[((0,i.wg)(),(0,i.j4)((0,i.LL)(e.dialog)))])),_:2},1040,["value"])])),activator:(0,i.w5)((({props:t})=>[(0,i.Wm)(I.l,(0,i.dG)({value:e,"base-color":"primary"},t),{prepend:(0,i.w5)((()=>[(0,i.Wm)(C.V,{start:""},{default:(0,i.w5)((()=>[(0,i.Wm)(u.t,{icon:e.icon},null,8,["icon"])])),_:2},1024)])),default:(0,i.w5)((()=>[(0,i.Wm)(N.V,null,{default:(0,i.w5)((()=>[(0,i.Uk)((0,k.zw)(e.text),1)])),_:2},1024)])),_:2},1040,["value"])])),_:2},1024)))),128))])),_:1}),(0,i.Wm)(D.J)])),_:1},8,["modelValue"])}var q=a(4900),H=a(9759),G=a(2900),R=a(9201),Y=a(165);const J=(0,i.Uk)("发送申请");function Q(e,t,a,n,r,o){return(0,i.wg)(),(0,i.j4)(V.K,null,{default:(0,i.w5)((()=>[(0,i.Wm)(L.o,null,{default:(0,i.w5)((()=>[(0,i.Wm)(O.D,{class:"d-flex justify-center"},{default:(0,i.w5)((()=>[(0,i.Wm)(Y.h,{modelValue:r.name,"onUpdate:modelValue":t[0]||(t[0]=e=>r.name=e),variant:"outlined",label:"好友用户名",style:{width:"120px"}},null,8,["modelValue"])])),_:1})])),_:1}),(0,i.Wm)(L.o,null,{default:(0,i.w5)((()=>[(0,i.Wm)(O.D,{class:"d-flex justify-center"},{default:(0,i.w5)((()=>[(0,i.Wm)(d.T,{color:"primary",onClick:t[1]||(t[1]=e=>o.addFriend())},{default:(0,i.w5)((()=>[J])),_:1})])),_:1})])),_:1}),(0,i.Wm)(p.v,{modelValue:r.snackbar.appear,"onUpdate:modelValue":t[2]||(t[2]=e=>r.snackbar.appear=e),color:r.snackbar.color},{default:(0,i.w5)((()=>[(0,i.Uk)((0,k.zw)(r.snackbar.msg),1)])),_:1},8,["modelValue","color"])])),_:1})}var X={components:{},data(){return{name:"",snackbar:{appear:!1,color:"",msg:""}}},methods:{async addFriend(){const e=await G.Z.friend.addFriend(this.name);e.updateSuccess?Object.assign(this.snackbar,{appear:!0,color:"success",msg:"申请发送成功"}):Object.assign(this.snackbar,{appear:!0,color:"warning",msg:e.err})}}};const ee=(0,$.Z)(X,[["render",Q]]);var te=ee,ae=a(3822);const ne=(0,i.Uk)(" 上传 "),ie=(0,i.Uk)("mdi-cloud-upload");function re(e,t,a,n,r,o){return(0,i.wg)(),(0,i.j4)(V.K,null,{default:(0,i.w5)((()=>[(0,i.Wm)(L.o,{"no-gutters":"",class:"d-flex justify-center align-center"},{default:(0,i.w5)((()=>[(0,i.Wm)(O.D,null,{default:(0,i.w5)((()=>[(0,i.Wm)(ae.Z,{accept:"image/*","show-size":"",variant:"outlined",style:{width:"200px"},label:"选择头像","prepend-icon":"mdi-image-outline",modelValue:r.currentFile,"onUpdate:modelValue":t[0]||(t[0]=e=>r.currentFile=e)},null,8,["modelValue"])])),_:1})])),_:1}),(0,i.Wm)(L.o,null,{default:(0,i.w5)((()=>[(0,i.Wm)(O.D,{class:"d-flex justify-center align-center"},{default:(0,i.w5)((()=>[(0,i.Wm)(d.T,{color:"success",dark:"",small:"",onClick:o.upload},{default:(0,i.w5)((()=>[ne,(0,i.Wm)(u.t,{right:"",dark:""},{default:(0,i.w5)((()=>[ie])),_:1})])),_:1},8,["onClick"])])),_:1})])),_:1}),(0,i.Wm)(p.v,{modelValue:r.snackbar.appear,"onUpdate:modelValue":t[1]||(t[1]=e=>r.snackbar.appear=e),color:r.snackbar.color},{default:(0,i.w5)((()=>[(0,i.Uk)((0,k.zw)(r.snackbar.msg),1)])),_:1},8,["modelValue","color"])])),_:1})}var oe={data(){return{currentFile:void 0,snackbar:{appear:!1,color:"",msg:""}}},methods:{upload(){this.currentFile?G.Z.uploadAvatar(this.currentFile[0]).then((()=>{Object.assign(this.snackbar,{appear:!0,color:"success",msg:"上传成功"})})).catch((()=>{Object.assign(this.snackbar,{appear:!0,color:"error",msg:"上传失败"}),this.currentFile=void 0})):this.message="Please select a file!"}}};const le=(0,$.Z)(oe,[["render",re]]);var se=le;function ce(e,t,a,n,r,o){const l=(0,i.up)("MovieList");return(0,i.wg)(),(0,i.j4)(V.K,null,{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(r.movies,((e,t)=>((0,i.wg)(),(0,i.j4)(l,{key:t,class:"pl-2",id:e.movie_id},null,8,["id"])))),128))])),_:1})}var de=a(3020),ue={created(){de.Z.history.readVisited().then((e=>this.movies=e))},data(){return{movies:[]}},components:{MovieList:q.Z}};const me=(0,$.Z)(ue,[["render",ce]]);var fe=me,pe=a(8389);const ge=(0,i.Uk)("没有收到好友申请");function he(e,t,a,r,o,l){const s=(0,i.up)("UserAvatar");return(0,i.wg)(),(0,i.j4)(V.K,null,{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.friends,((e,t)=>((0,i.wg)(),(0,i.j4)(T.i,{key:t},{default:(0,i.w5)((()=>[(0,i.Wm)(I.l,null,{default:(0,i.w5)((()=>[(0,i.Wm)(s,{class:"mr-4",path:e.avatar,name:e.nickname},null,8,["path","name"]),(0,i.Wm)(I.l,{width:"100",title:e.nickname,class:"px-0"},null,8,["title"]),(0,i.Wm)(pe.m,null,{default:(0,i.w5)((()=>[(0,i.Wm)(u.t,{onClick:e=>l.accept(t),icon:"mdi-check",class:"mr-2"},null,8,["onClick"]),(0,i.Wm)(u.t,{onClick:e=>l.reject(t),icon:"mdi-close"},null,8,["onClick"])])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128)),(0,i.wy)((0,i.Wm)(L.o,null,{default:(0,i.w5)((()=>[(0,i.Wm)(O.D,{cols:"2",class:"d-flex justify-center"},{default:(0,i.w5)((()=>[(0,i.Wm)(u.t,{icon:"mdi-emoticon-sad-outline"})])),_:1}),(0,i.Wm)(O.D,null,{default:(0,i.w5)((()=>[ge])),_:1})])),_:1},512),[[n.F8,!l.friends.length]])])),_:1})}var we={components:{UserAvatar:H.Z},created(){G.Z.friend.readInfo()},computed:{friends(){return this.$store.state.user.friends.apply}},data(){return{}},methods:{accept(e){G.Z.friend.acceptApply(this.friends[e].id)},reject(e){G.Z.friend.rejectApply(this.friends[e].id)}}};const ve=(0,$.Z)(we,[["render",he]]);var ye=ve,_e={components:{MovieList:q.Z,UserAvatar:H.Z,AddFriend:te,EditAvatar:se,ShowHistroy:fe,ShowApply:ye},computed:{user(){return this.$store.state.user}},created(){G.Z.friend.readInfo()},data(){return{drawer:!1,dialog:!1,items:[{text:"添加好友",icon:"mdi-account-multiple-plus-outline",dialog:"AddFriend"},{text:"查看申请",icon:"mdi-message-outline",dialog:"ShowApply"},{text:"修改头像",icon:"mdi-image-edit-outline",dialog:"EditAvatar"},{text:"历史记录",icon:"mdi-history",dialog:"ShowHistroy"}],actions:[{name:"查看收藏",click:this.getFriendMovies},{name:"删除好友",click:this.deleteFriend},{name:"设为置顶",click:this.pinTop}],friend_collection:[]}},methods:{logout:G.Z.logout,changeDrawer(){this.drawer=!this.drawer},deleteFriend(e){G.Z.friend.deleteFriend(e)},pinTop(e){G.Z.friend.pinTop(e)},async getFriendMovies(e){this.friend_collection=await R.Z.getFriendMovies(e)},refresh(){G.Z.friend.readInfo()}}};const be=(0,$.Z)(_e,[["render",K]]);var ke=be,Ze=a(1844),We={name:"App",components:{ButtomNavigation:F,DrawerNavigation:ke,UserAvatar:H.Z},created(){sessionStorage.getItem("store")&&this.$store.replaceState(Object.assign({},this.$store.state,JSON.parse(sessionStorage.getItem("store")))),window.addEventListener("beforeunload",(()=>{sessionStorage.setItem("store",JSON.stringify(this.$store.state))}))},mounted(){this.user.isLogin?this.$router.push("/home"):this.$router.push("/login"),this.heartbeat(),this.timer=setInterval(this.heartbeat,6e4)},data(){return{timer:"",drawer:!1,group:null,topLevelPages:[{name:"主页",path:"/home",icon:"mdi-home"},{name:"收藏",path:"/collection",icon:"mdi-heart"},{name:"筛选",path:"/filter",icon:"mdi-filter"}]}},computed:{isTopLevelPage(){return this.topLevelPages.map((e=>e.path)).includes(this.$route.path)},user(){return this.$store.state.user}},methods:{goBack(){this.$router.back()},upload:Ze.Z.upload,async heartbeat(){this.user.isLogin&&(await G.Z.postActive(),G.Z.readActive(this.user.info.id))}},beforeUnmount(){clearInterval(this.timer)}};const je=(0,$.Z)(We,[["render",b]]);var $e=je,xe=(a(2135),a(8727));const Fe={dark:!1,colors:{background:"#FFFFFF",surface:"#FFFFFF",primary:"#6200EE","primary-darken-1":"#3700B3",secondary:"#03DAC6","secondary-darken-1":"#018786",error:"#B00020",info:"#2196F3",success:"#4CAF50",warning:"#FB8C00"}};var Ce=(0,xe.Rd)({theme:{defaultTheme:"customLightTheme",themes:{customLightTheme:Fe}}});async function Ae(){const e=await a.e(461).then(a.t.bind(a,3657,23));e.load({google:{families:["Roboto:100,300,400,500,700,900&display=swap"]}})}var Ue=a(1120),De=a(4239),Le=a(8108),Oe=a(3065),Ve=a(5129),Te=a.n(Ve);Ae();const Ie=(0,n.ri)($e);Ie.config.globalProperties.$axios=Le.Z,Ie.use(Te()).use(Oe.VueWindowSizePlugin).use(De.Z).use(Ue.N).use(Ce).mount("#app")},1120:function(e,t,a){a.d(t,{N:function(){return r}});var n=a(678);const i=[{name:"notFound",path:"/:path(.*)+"},{name:"login",path:"/login",component:()=>a.e(686).then(a.bind(a,7686)),meta:{title:"登录"}},{name:"register",path:"/register",component:()=>a.e(923).then(a.bind(a,6923)),meta:{title:"注册"}},{name:"search",path:"/search",component:()=>Promise.all([a.e(550),a.e(634)]).then(a.bind(a,6121)),meta:{title:"搜索"}},{name:"home",path:"/home",component:()=>a.e(362).then(a.bind(a,4362)),meta:{title:"主页"}},{name:"collection",path:"/collection",component:()=>a.e(710).then(a.bind(a,2710)),meta:{title:"收藏"}},{name:"filter",path:"/filter",component:()=>Promise.all([a.e(550),a.e(333)]).then(a.bind(a,9807)),meta:{title:"筛选"}},{name:"video",path:"/video/:id",component:()=>a.e(728).then(a.bind(a,4728)),meta:{title:"视频"}},{name:"user",path:"/user",component:()=>a.e(871).then(a.bind(a,9871)),meta:{title:"用户"}}],r=(0,n.p7)({routes:i,history:(0,n.r5)()});r.beforeEach(((e,t,a)=>{const n=e.meta&&e.meta.title;n&&(document.title=n),a()}))},4239:function(e,t,a){var n=a(65);t["Z"]=(0,n.MT)({state(){return{unfinished:!1,user:{token:"",isLogin:!1,isActive:!1,expired:!1,info:{id:"未知",name:"未知",nickname:"未知",email:"未知",avatar_url:"未知"},friends:{apply:[]}},collections:[],movies:[{id:"343611",likes:0,comments:[{avatarUrl:"https://cdn.vuetifyjs.com/images/john.png",author:"张三",content:"这是一条评论",date:"2022-06-01"},{avatarUrl:"https://cdn.vuetifyjs.com/images/john.png",author:"李四",content:"这是一条评论",date:"2022-06-02"}]}],history:[1,2,3]}},mutations:{login(e,t){Object.assign(e.user,{token:t,isLogin:!0,expired:!1})},logout(e){Object.assign(e.user,{token:"",isLogin:!1,expired:!1})},expire(e){Object.assign(e.user,{token:"",isLogin:!1,expired:!0})},readActive(e,t){e.user.isActive=t},setActive(e){e.user.isActive=!0},setUser(e,t){e.user.info=t},setFriend(e,t){e.user.friends=t},setCollection(e,t){e.collections=t},alertUnfinished(e){e.unfinished=!0,setTimeout((()=>{e.unfinished=!1}),2e3)}}})},8108:function(e,t,a){var n=a(1120),i=a(4239),r=a(6265),o=a.n(r);o().defaults.timeout=1e4,o().defaults.baseURL="https://egg.web-framework-ao2f.1627164863551065.cn-hangzhou.fc.devsapp.net/api/v1",o().interceptors.request.use((e=>(i.Z.state.user.isLogin&&(e.headers.Authorization=`bearer ${i.Z.state.user.token}`),e)),(e=>Promise.reject(e))),o().interceptors.response.use((e=>e.data),(e=>("jwt expired"==e.response.data.message&&(i.Z.commit("expire"),n.N.push("/login")),Promise.reject(e)))),t["Z"]=o()},4900:function(e,t,a){a.d(t,{Z:function(){return v}});var n=a(3396),i=a(7139),r=a(3369),o=a(6824),l=a(8521),s=a(7653),c=a(2127),d=a(7769),u=a(5906);const m=["src"];function f(e,t,a,f,p,g){const h=(0,n.up)("v-list-item-header");return(0,n.wg)(),(0,n.j4)(s.l,{lines:"three"},{default:(0,n.w5)((()=>[(0,n.Wm)(r.K,null,{default:(0,n.w5)((()=>[(0,n.Wm)(o.o,{class:"d-flex text-center justify-center margin-center"},{default:(0,n.w5)((()=>[p.loading?((0,n.wg)(),(0,n.j4)(u.L,{key:0,indeterminate:"",color:"primary"})):(0,n.kq)("",!0)])),_:1}),p.loading?(0,n.kq)("",!0):((0,n.wg)(),(0,n.j4)(o.o,{key:0,onClick:t[0]||(t[0]=t=>e.$router.push({path:`/video/${a.id}`}))},{default:(0,n.w5)((()=>[(0,n.Wm)(l.D,{cols:"3"},{default:(0,n.w5)((()=>[(0,n._)("img",{src:p.src,alt:"",style:{height:"100px",width:"60px"}},null,8,m)])),_:1}),(0,n.Wm)(l.D,{cols:"9"},{default:(0,n.w5)((()=>[(0,n.Wm)(h,null,{default:(0,n.w5)((()=>[(0,n.Wm)(c.V,null,{default:(0,n.w5)((()=>[(0,n.Uk)((0,i.zw)(p.title),1)])),_:1}),(0,n.Wm)(d.o,null,{default:(0,n.w5)((()=>[(0,n.Uk)((0,i.zw)(p.description),1)])),_:1}),(0,n.Wm)(d.o,{class:"pt-2"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,i.zw)(p.tag),1)])),_:1})])),_:1})])),_:1})])),_:1}))])),_:1})])),_:1})}var p=a(3020),g={setup(){},data(){return{title:"加载中",description:"",tag:"",src:"",loading:!0}},created(){this.fetchData()},watch:{id:function(){this.fetchData()}},props:{id:String},methods:{async fetchData(){p.Z.detail(this.id).then((e=>{Object.assign(this,e),this.loading=!1}))}}},h=a(89);const w=(0,h.Z)(g,[["render",f]]);var v=w},9759:function(e,t,a){a.d(t,{Z:function(){return p}});var n=a(3396),i=a(7139),r=a(5701);const o=["src"],l={key:1,class:"white--text text-h5"};function s(e,t,a,s,c,d){return(0,n.wg)(),(0,n.j4)(r.V,{size:"40",color:a.name?d.uniqolor(a.name[0]).color:"white"},{default:(0,n.w5)((()=>[a.path?((0,n.wg)(),(0,n.iD)("img",{key:0,src:`http://127.0.0.1:7001${a.path}`},null,8,o)):((0,n.wg)(),(0,n.iD)("span",l,(0,i.zw)(a.name?a.name[0]:"未知"),1))])),_:1},8,["color"])}var c=a(4643),d=a.n(c),u={props:{id:{type:Number},path:String,name:String},methods:{uniqolor:d()}},m=a(89);const f=(0,m.Z)(u,[["render",s]]);var p=f}},t={};function a(n){var i=t[n];if(void 0!==i)return i.exports;var r=t[n]={id:n,loaded:!1,exports:{}};return e[n].call(r.exports,r,r.exports,a),r.loaded=!0,r.exports}a.m=e,function(){var e=[];a.O=function(t,n,i,r){if(!n){var o=1/0;for(d=0;d<e.length;d++){n=e[d][0],i=e[d][1],r=e[d][2];for(var l=!0,s=0;s<n.length;s++)(!1&r||o>=r)&&Object.keys(a.O).every((function(e){return a.O[e](n[s])}))?n.splice(s--,1):(l=!1,r<o&&(o=r));if(l){e.splice(d--,1);var c=i();void 0!==c&&(t=c)}}return t}r=r||0;for(var d=e.length;d>0&&e[d-1][2]>r;d--)e[d]=e[d-1];e[d]=[n,i,r]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};a.t=function(n,i){if(1&i&&(n=this(n)),8&i)return n;if("object"===typeof n&&n){if(4&i&&n.__esModule)return n;if(16&i&&"function"===typeof n.then)return n}var r=Object.create(null);a.r(r);var o={};e=e||[null,t({}),t([]),t(t)];for(var l=2&i&&n;"object"==typeof l&&!~e.indexOf(l);l=t(l))Object.getOwnPropertyNames(l).forEach((function(e){o[e]=function(){return n[e]}}));return o["default"]=function(){return n},a.d(r,o),r}}(),function(){a.d=function(e,t){for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){a.f={},a.e=function(e){return Promise.all(Object.keys(a.f).reduce((function(t,n){return a.f[n](e,t),t}),[]))}}(),function(){a.u=function(e){return"js/"+(461===e?"webfontloader":e)+"."+{333:"405a9684",362:"c7693dea",461:"2cfa36e2",550:"04fe8c60",634:"072769af",686:"c1adc474",710:"3455d437",728:"b043e195",871:"42558d41",923:"79bf7e7e"}[e]+".js"}}(),function(){a.miniCssF=function(e){return"css/"+e+"."+{333:"d4d5ba03",362:"51fe8daa",634:"81c68bcb",710:"3d977ef9",728:"4bf726a3",923:"9fedf798"}[e]+".css"}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="hublix:";a.l=function(n,i,r,o){if(e[n])e[n].push(i);else{var l,s;if(void 0!==r)for(var c=document.getElementsByTagName("script"),d=0;d<c.length;d++){var u=c[d];if(u.getAttribute("src")==n||u.getAttribute("data-webpack")==t+r){l=u;break}}l||(s=!0,l=document.createElement("script"),l.charset="utf-8",l.timeout=120,a.nc&&l.setAttribute("nonce",a.nc),l.setAttribute("data-webpack",t+r),l.src=n),e[n]=[i];var m=function(t,a){l.onerror=l.onload=null,clearTimeout(f);var i=e[n];if(delete e[n],l.parentNode&&l.parentNode.removeChild(l),i&&i.forEach((function(e){return e(a)})),t)return t(a)},f=setTimeout(m.bind(null,void 0,{type:"timeout",target:l}),12e4);l.onerror=m.bind(null,l.onerror),l.onload=m.bind(null,l.onload),s&&document.head.appendChild(l)}}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){a.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){a.p=""}(),function(){var e=function(e,t,a,n){var i=document.createElement("link");i.rel="stylesheet",i.type="text/css";var r=function(r){if(i.onerror=i.onload=null,"load"===r.type)a();else{var o=r&&("load"===r.type?"missing":r.type),l=r&&r.target&&r.target.href||t,s=new Error("Loading CSS chunk "+e+" failed.\n("+l+")");s.code="CSS_CHUNK_LOAD_FAILED",s.type=o,s.request=l,i.parentNode.removeChild(i),n(s)}};return i.onerror=i.onload=r,i.href=t,document.head.appendChild(i),i},t=function(e,t){for(var a=document.getElementsByTagName("link"),n=0;n<a.length;n++){var i=a[n],r=i.getAttribute("data-href")||i.getAttribute("href");if("stylesheet"===i.rel&&(r===e||r===t))return i}var o=document.getElementsByTagName("style");for(n=0;n<o.length;n++){i=o[n],r=i.getAttribute("data-href");if(r===e||r===t)return i}},n=function(n){return new Promise((function(i,r){var o=a.miniCssF(n),l=a.p+o;if(t(o,l))return i();e(n,l,i,r)}))},i={143:0};a.f.miniCss=function(e,t){var a={333:1,362:1,634:1,710:1,728:1,923:1};i[e]?t.push(i[e]):0!==i[e]&&a[e]&&t.push(i[e]=n(e).then((function(){i[e]=0}),(function(t){throw delete i[e],t})))}}(),function(){var e={143:0};a.f.j=function(t,n){var i=a.o(e,t)?e[t]:void 0;if(0!==i)if(i)n.push(i[2]);else{var r=new Promise((function(a,n){i=e[t]=[a,n]}));n.push(i[2]=r);var o=a.p+a.u(t),l=new Error,s=function(n){if(a.o(e,t)&&(i=e[t],0!==i&&(e[t]=void 0),i)){var r=n&&("load"===n.type?"missing":n.type),o=n&&n.target&&n.target.src;l.message="Loading chunk "+t+" failed.\n("+r+": "+o+")",l.name="ChunkLoadError",l.type=r,l.request=o,i[1](l)}};a.l(o,s,"chunk-"+t,t)}},a.O.j=function(t){return 0===e[t]};var t=function(t,n){var i,r,o=n[0],l=n[1],s=n[2],c=0;if(o.some((function(t){return 0!==e[t]}))){for(i in l)a.o(l,i)&&(a.m[i]=l[i]);if(s)var d=s(a)}for(t&&t(n);c<o.length;c++)r=o[c],a.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return a.O(d)},n=self["webpackChunkhublix"]=self["webpackChunkhublix"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=a.O(void 0,[998],(function(){return a(6411)}));n=a.O(n)})();
//# sourceMappingURL=app.91cf58a8.js.map