{"version":3,"file":"js/400.b6a0eef6.js","mappings":"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","sources":["webpack://hublix/./src/pages/CollectionPage.vue","webpack://hublix/./src/components/SwipeLeftAction.vue","webpack://hublix/./src/components/SwipeLeftAction.vue?c5ca","webpack://hublix/./src/pages/CollectionPage.vue?aad1"],"sourcesContent":["<template>\r\n  <v-container class=\"fill-height d-flex flex-column\">\r\n    <v-row\r\n      ><v-col>\r\n        <v-list v-model:opened=\"open\">\r\n          <SwipeLeftAction\r\n            v-for=\"(collection, index) in collections\"\r\n            :key=\"index\"\r\n            :index=\"index\"\r\n            :name=\"collection.name\"\r\n            :enable=\"\r\n              !open.includes(index) && !readOnly && !is_default(collection.id)\r\n            \"\r\n            @onRemove=\"del($event)\"\r\n            @onRename=\"rename($event)\"\r\n          >\r\n            <v-list-group active-color=\"primary\" :value=\"index\">\r\n              <template v-slot:activator=\"{ props }\">\r\n                <v-list-item\r\n                  class=\"list-item\"\r\n                  v-bind=\"props\"\r\n                  :prepend-icon=\"\r\n                    open.includes(index)\r\n                      ? 'mdi-folder-open-outline'\r\n                      : 'mdi-folder-outline'\r\n                  \"\r\n                  :title=\"collection.name\"\r\n                  :value=\"collection.name\"\r\n                ></v-list-item>\r\n              </template>\r\n              <MovieList\r\n                v-for=\"(movie, index) in collection.movies\"\r\n                :key=\"index\"\r\n                :id=\"movie.id\"\r\n              />\r\n            </v-list-group>\r\n          </SwipeLeftAction>\r\n        </v-list>\r\n      </v-col>\r\n    </v-row>\r\n\r\n    <v-row class=\"align-end\" v-show=\"!readOnly\">\r\n      <v-col align=\"end\">\r\n        <v-btn @click=\"create()\" class=\"mx-2\" icon=\"mdi-plus\" color=\"indigo\">\r\n        </v-btn>\r\n      </v-col>\r\n    </v-row>\r\n  </v-container>\r\n</template>\r\n<script>\r\nimport MovieList from \"@/components/MovieList.vue\";\r\nimport collection from \"@/api/collection\";\r\nimport SwipeLeftAction from \"@/components/SwipeLeftAction.vue\";\r\nexport default {\r\n  components: {\r\n    MovieList,\r\n    SwipeLeftAction,\r\n  },\r\n  created() {\r\n    collection.readInfo();\r\n  },\r\n  data() {\r\n    return {\r\n      open: [],\r\n    };\r\n  },\r\n  props: {\r\n    readOnly: { type: Boolean, default: false },\r\n  },\r\n  computed: {\r\n    collections() {\r\n      return this.$store.state.collections;\r\n    },\r\n    is_default() {\r\n      return (id) => this.$store.state.user.info.default_collection === id;\r\n    },\r\n  },\r\n  methods: {\r\n    create() {\r\n      collection.create();\r\n    },\r\n    del(index) {\r\n      collection.delete(this.collections[index].id);\r\n    },\r\n    rename(args) {\r\n      this.collections[args.index].name = args.name;\r\n      collection.update(this.collections[args.index].id, args.name);\r\n    },\r\n  },\r\n};\r\n</script>\r\n<style>\r\n.list-item {\r\n  border-radius: 12px;\r\n  background: #fafafa;\r\n}\r\n</style>\r\n","<template>\r\n  <div wrap style=\"margin-bottom: 20px\">\r\n    <div\r\n      class=\"slider-item\"\r\n      v-show=\"enable && !renaming\"\r\n      :style=\"`height:${height}px;`\"\r\n    >\r\n      <div\r\n        class=\"content\"\r\n        @touchstart=\"touchStart\"\r\n        @touchmove=\"touchMove\"\r\n        @touchend=\"touchEnd\"\r\n        :style=\"deleteSlider\"\r\n      >\r\n        <div ref=\"slot\"><slot></slot></div>\r\n        <v-icon\r\n          @click=\"remove\"\r\n          class=\"remove\"\r\n          :style=\"`line-height:${height}px;right:${-DELBTNWIDTH / 2}px`\"\r\n          icon=\"mdi-delete\"\r\n        />\r\n        <v-icon\r\n          @click=\"renaming = true\"\r\n          class=\"rename\"\r\n          :style=\"`line-height:${height}px;right:${-DELBTNWIDTH}px`\"\r\n          icon=\"mdi-pencil\"\r\n        />\r\n      </div>\r\n    </div>\r\n    <slot v-if=\"!enable\"></slot>\r\n    <v-list-item\r\n      class=\"list-item\"\r\n      v-show=\"renaming\"\r\n      :prepend-icon=\"'mdi-folder-outline'\"\r\n    >\r\n      <div style=\"width: 100%; display: flex\">\r\n        <input\r\n          onfocus=\"this.select()\"\r\n          type=\"text\"\r\n          ref=\"input\"\r\n          style=\"flex: 1; outline: none\"\r\n          v-model=\"newName\"\r\n        />\r\n        <v-icon @click=\"rename\" icon=\"mdi-check\" />\r\n        <v-icon @click=\"renaming = false\" end icon=\"mdi-close\" /></div\r\n    ></v-list-item>\r\n  </div>\r\n</template>\r\n<script>\r\n// 获取删除按钮的宽度，此宽度为滑块左滑的最大距离\r\nconst DELBTNWIDTH = 120;\r\nexport default {\r\n  data() {\r\n    return {\r\n      startX: 0, // 开始pos\r\n      endX: 0, // 结束pos\r\n      moveX: 0, // 滑动时的pos\r\n      disX: 0, // 滑动距离\r\n      deleteSlider: \"transform:translateX(0px)\",\r\n      DELBTNWIDTH: DELBTNWIDTH,\r\n      renaming: false,\r\n      height: 0,\r\n      width: 0,\r\n      newName: this.name,\r\n    };\r\n  },\r\n  mounted() {\r\n    this.height = this.$refs.slot.clientHeight;\r\n    this.width = this.$refs.slot.clientWidth;\r\n  },\r\n  emits: [\"onRemove\", \"onRename\"],\r\n  watch: {\r\n    renaming(val) {\r\n      if (val) {\r\n        this.$nextTick(() => {\r\n          this.$refs.input.select();\r\n        });\r\n      }\r\n    },\r\n  },\r\n  methods: {\r\n    remove() {\r\n      this.$emit(\"onRemove\", this.index);\r\n    },\r\n    rename() {\r\n      this.$emit(\"onRename\", { index: this.index, name: this.newName });\r\n      this.renaming = false;\r\n    },\r\n    touchStart(timestamp, ev) {\r\n      ev = ev || event;\r\n      this.currSliderTimestamp = timestamp;\r\n      this.startX = 0;\r\n      // tounches类数组，等于1时表示此时有只有一只手指在触摸屏幕\r\n      if (ev.touches.length === 1) {\r\n        // 记录开始位置\r\n        this.startX = ev.touches[0].clientX;\r\n      }\r\n    },\r\n    touchMove(timestamp, ev) {\r\n      ev = ev || event;\r\n      if (ev.touches.length === 1) {\r\n        // 滑动时距离浏览器左侧实时距离\r\n        this.moveX = ev.touches[0].clientX;\r\n        //实时滑动距离，和上一次滑动做个衔接。防止第二次触发的时候，位置不对的问题\r\n        this.disX = this.startX - this.moveX + this.disX;\r\n        // 如果是向右滑动或者不滑动，不改变滑块的位置\r\n        if (this.disX > 0) {\r\n          if (this.disX < 100) {\r\n            this.deleteSlider = \"transform:translateX(-\" + this.disX + \"px)\";\r\n          } else {\r\n            this.deleteSlider = \"transform:translateX(-100px)\";\r\n          }\r\n        } else {\r\n          if (this.disX < -60) {\r\n            this.deleteSlider = \"transform:translateX(60px)\";\r\n          } else {\r\n            this.deleteSlider =\r\n              \"transform:translateX(\" + Math.abs(this.disX) + \"px)\";\r\n          }\r\n        }\r\n      }\r\n    },\r\n    touchEnd() {\r\n      //滑动完成后，滑块应该在的位置\r\n      if (this.disX < 100) {\r\n        this.deleteSlider = \"transform:translateX(0px)\";\r\n        this.disX = 0;\r\n      } else {\r\n        this.deleteSlider = \"transform:translateX(-\" + DELBTNWIDTH + \"px)\";\r\n        this.disX = 60;\r\n      }\r\n    },\r\n  },\r\n  props: {\r\n    enable: Boolean, //是否可以滑动\r\n    index: Number,\r\n    name: String,\r\n  },\r\n};\r\n</script>\r\n<style>\r\n.slider-item {\r\n  width: 100%;\r\n  overflow: hidden;\r\n  display: flex;\r\n  position: relative;\r\n}\r\n\r\n.content {\r\n  position: absolute;\r\n  min-width: 100%;\r\n  height: 100%;\r\n  box-sizing: normal-box;\r\n  position: relative;\r\n  transition-property: all;\r\n  transition-duration: 0.4s;\r\n  transition-timing-function: cubic-bezier(0, 0.85, 0.72, 0.86);\r\n  transition-delay: 0s;\r\n}\r\n\r\n.remove {\r\n  position: absolute;\r\n  top: 0;\r\n  width: 60px;\r\n  height: 100%;\r\n  background: #fe5ba8;\r\n  text-align: center;\r\n  vertical-align: middle;\r\n  font-size: 15px;\r\n  color: #ffffff;\r\n}\r\n.rename {\r\n  position: absolute;\r\n  top: 0;\r\n  width: 60px;\r\n  height: 100%;\r\n  background: blue;\r\n  text-align: center;\r\n  vertical-align: middle;\r\n  font-size: 15px;\r\n  color: #ffffff;\r\n}\r\n.list-item {\r\n  border-radius: 12px;\r\n  background: #fafafa;\r\n}\r\n</style>\r\n","import { render } from \"./SwipeLeftAction.vue?vue&type=template&id=9fbdef4c\"\nimport script from \"./SwipeLeftAction.vue?vue&type=script&lang=js\"\nexport * from \"./SwipeLeftAction.vue?vue&type=script&lang=js\"\n\nimport \"./SwipeLeftAction.vue?vue&type=style&index=0&id=9fbdef4c&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\85068\\\\repository\\\\archive\\\\hublix\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./CollectionPage.vue?vue&type=template&id=33e2b13a\"\nimport script from \"./CollectionPage.vue?vue&type=script&lang=js\"\nexport * from \"./CollectionPage.vue?vue&type=script&lang=js\"\n\nimport \"./CollectionPage.vue?vue&type=style&index=0&id=33e2b13a&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\85068\\\\repository\\\\archive\\\\hublix\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["_createBlock","_component_v_container","class","_createVNode","_component_v_row","_component_v_col","_component_v_list","opened","$data","$event","_createElementBlock","_Fragment","_renderList","$options","collection","index","_component_SwipeLeftAction","key","name","enable","includes","$props","id","onOnRemove","onOnRename","_component_v_list_group","value","activator","props","_component_v_list_item","title","movies","movie","_component_MovieList","align","_component_v_btn","onClick","icon","color","wrap","style","ref","_createElementVNode","onTouchstart","onTouchmove","onTouchend","_renderSlot","_ctx","_component_v_icon","onfocus","type","end","DELBTNWIDTH","data","startX","endX","moveX","disX","deleteSlider","renaming","height","width","newName","this","mounted","$refs","slot","clientHeight","clientWidth","emits","watch","val","$nextTick","input","select","methods","remove","$emit","rename","touchStart","timestamp","ev","event","currSliderTimestamp","touches","length","clientX","touchMove","Math","abs","touchEnd","Boolean","Number","String","__exports__","components","MovieList","SwipeLeftAction","created","open","readOnly","default","computed","collections","$store","state","is_default","user","info","default_collection","create","del","args","render"],"sourceRoot":""}